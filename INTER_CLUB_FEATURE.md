# 🤝 俱樂部友誼賽功能 (Inter-Club Friendly Match Feature)

## 概述 (Overview)

本系統新增了「友誼賽制」模式，專門用於兩個網球俱樂部之間的對抗賽。除了原有的「內部賽制」（4隊循環賽），現在可以切換為「友誼賽制」（2俱樂部對抗）。

## 新增功能 (New Features)

### 1. 賽事模式選擇
在「賽事設定」頁面，可以選擇兩種模式：

- **內部賽制** 🏆
  - 4隊循環賽（甲、乙、丙、丁）
  - 每隊獨立積分排名
  - 適合單一俱樂部內部比賽

- **友誼賽制** 🤝
  - 2俱樂部對抗賽
  - 主隊 vs 客隊
  - 可自訂俱樂部名稱
  - 適合俱樂部間友誼交流賽

### 2. 俱樂部名稱自訂
在友誼賽模式下，可以設定：
- **主隊名稱**（預設：主隊）
- **客隊名稱**（預設：客隊）

例如：「中和網球俱樂部」vs「永和網球俱樂部」

### 3. 選手分組方式

#### 內部賽制
- 選手平均分配到4隊（甲、乙、丙、丁）
- 每隊顯示獨立

#### 友誼賽制
- 選手分配到2個俱樂部
- 主隊包含：甲隊 + 乙隊的選手
- 客隊包含：丙隊 + 丁隊的選手
- 顯示時以俱樂部為單位分組

### 4. 比賽配對規則

#### 內部賽制
- 4隊循環對戰
- 第1輪：甲vs乙、丙vs丁
- 第2輪：甲vs丙、乙vs丁
- 第3輪：甲vs丁、乙vs丙

#### 友誼賽制
- 只安排俱樂部間的對戰（無內部互打）
- 每輪包含所有可能的跨俱樂部配對：
  - 甲隊 vs 丙隊
  - 甲隊 vs 丁隊
  - 乙隊 vs 丙隊
  - 乙隊 vs 丁隊

### 5. 排名顯示

#### 內部賽制
- 顯示4隊排名
- 每隊獨立計分

#### 友誼賽制
- 顯示2俱樂部排名
- 合併計算各俱樂部的勝場、局數
- 清楚呈現主客隊對戰結果

### 6. 選手表現統計

#### 內部賽制
- 按4隊分組顯示選手表現

#### 友誼賽制
- 按2俱樂部分組顯示選手表現
- 更清楚看出各俱樂部選手實力

## 使用說明 (How to Use)

### 步驟 1：選擇賽事模式
1. 進入「賽事設定」頁面
2. 在「賽事模式」區塊選擇「友誼賽制」
3. 設定俱樂部名稱（可選）

### 步驟 2：設定比賽參數
- 每隊人數：建議每俱樂部各20人（主隊10+10，客隊10+10）
- 每輪點數：建議5點
- 總輪數：建議1-3輪

### 步驟 3：新增選手
- 可手動新增或匯入Excel
- 系統會自動平均分配到兩個俱樂部
- 主隊包含甲乙隊，客隊包含丙丁隊

### 步驟 4：生成賽程
- 系統只會安排跨俱樂部的對戰
- 不會有同俱樂部內部對打的情況

### 步驟 5：查看排名
- 在「即時排名」頁面查看俱樂部排名
- 選手表現按俱樂部分組顯示

## 技術實現 (Technical Implementation)

### 新增類型定義
```typescript
export type TournamentMode = 'internal' | 'inter-club';

interface TournamentSettings {
  // ... existing fields
  tournamentMode: TournamentMode;
  homeClubName: string;
  awayClubName: string;
}
```

### 主要修改的檔案
1. **src/types/index.ts** - 新增類型定義
2. **src/App.tsx** - 模式切換、俱樂部名稱設定、選手分配邏輯
3. **src/utils/scheduleGenerator.ts** - 比賽配對邏輯（跨俱樂部）
4. **src/components/PlayerManagement.tsx** - 選手顯示分組
5. **src/components/Standings.tsx** - 俱樂部排名和選手統計
6. **src/App.css** - 新增模式選擇器和俱樂部卡片樣式

### 資料儲存
- 所有設定自動儲存到 localStorage
- 切換模式後會保留選手資料
- 重新生成賽程即可套用新模式

## 優點 (Benefits)

1. **彈性切換**：可隨時在內部賽制和友誼賽制間切換
2. **專業呈現**：俱樂部名稱自訂，更符合實際比賽情境
3. **清楚對戰**：友誼賽只安排跨俱樂部對戰，避免混淆
4. **統計完整**：俱樂部層級的勝負統計一目了然
5. **相容性佳**：不影響原有內部賽制功能

## 注意事項 (Notes)

1. 切換模式後，建議重新生成賽程
2. 選手會自動重新分配到新的分組
3. 俱樂部名稱可使用中英文，最多20字元
4. 所有比賽規則（年齡遞增、混雙等）仍然適用

## 範例場景 (Example Scenarios)

### 場景 1：社區俱樂部友誼賽
- 主隊：中和網球俱樂部（20人）
- 客隊：永和網球俱樂部（20人）
- 設定：5點3輪，每人至少出賽2場

### 場景 2：企業交流賽
- 主隊：台積電網球社（20人）
- 客隊：聯發科網球社（20人）
- 設定：3點2輪，每人至少出賽1場

### 場景 3：校友對抗賽
- 主隊：台大網球校友會（20人）
- 客隊：清大網球校友會（20人）
- 設定：5點3輪，每人至少出賽2場

## 未來擴充 (Future Enhancements)

可能的擴充功能：
- [ ] 支援3個以上俱樂部的多邊對抗賽
- [ ] 俱樂部Logo上傳功能
- [ ] 俱樂部歷史戰績記錄
- [ ] PDF報表加入俱樂部名稱和Logo
- [ ] 俱樂部MVP選手自動評選

---

## 版本資訊 (Version Info)
- **版本**：v2.1
- **發布日期**：2026-01-09
- **相容性**：完全向下相容原有內部賽制功能
